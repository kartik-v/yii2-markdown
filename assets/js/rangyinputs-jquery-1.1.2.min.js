(function(c){var l="undefined";var d,g,q,f,b;var n,i,m,p;function j(s,v){var u=typeof s[v];return u==="function"||(!!(u=="object"&&s[v]))||u=="unknown"}function k(s,t){return typeof(s[t])!=l}function e(s,t){return !!(typeof(s[t])=="object"&&s[t])}function h(s){if(window.console&&window.console.log){window.console.log("RangyInputs not supported in your browser. Reason: "+s)}}function o(t,u,s){if(u<0){u+=t.value.length}if(typeof s==l){s=u}if(s<0){s+=t.value.length}return{start:u,end:s}}function a(t,u,s){return{start:u,end:s,length:s-u,text:t.value.slice(u,s)}}function r(){return e(document,"body")?document.body:document.getElementsByTagName("body")[0]}c(document).ready(function(){var t=document.createElement("textarea");r().appendChild(t);if(k(t,"selectionStart")&&k(t,"selectionEnd")){d=function(x){var y=x.selectionStart,w=x.selectionEnd;return a(x,y,w)};g=function(y,w,x){var z=o(y,w,x);y.selectionStart=z.start;y.selectionEnd=z.end};p=function(x,w){if(w){x.selectionEnd=x.selectionStart}else{x.selectionStart=x.selectionEnd}}}else{if(j(t,"createTextRange")&&e(document,"selection")&&j(document.selection,"createRange")){d=function(A){var D=0,y=0,C,x,w,B;var z=document.selection.createRange();if(z&&z.parentElement()==A){w=A.value.length;C=A.value.replace(/\r\n/g,"\n");x=A.createTextRange();x.moveToBookmark(z.getBookmark());B=A.createTextRange();B.collapse(false);if(x.compareEndPoints("StartToEnd",B)>-1){D=y=w}else{D=-x.moveStart("character",-w);D+=C.slice(0,D).split("\n").length-1;if(x.compareEndPoints("EndToEnd",B)>-1){y=w}else{y=-x.moveEnd("character",-w);y+=C.slice(0,y).split("\n").length-1}}}return a(A,D,y)};var v=function(w,x){return x-(w.value.slice(0,x).split("\r\n").length-1)};g=function(A,w,z){var B=o(A,w,z);var y=A.createTextRange();var x=v(A,B.start);y.collapse(true);if(B.start==B.end){y.move("character",x)}else{y.moveEnd("character",v(A,B.end));y.moveStart("character",x)}y.select()};p=function(y,x){var w=document.selection.createRange();w.collapse(x);w.select()}}else{r().removeChild(t);h("No means of finding text input caret position");return}}r().removeChild(t);f=function(x,A,w,y){var z;if(A!=w){z=x.value;x.value=z.slice(0,A)+z.slice(w)}if(y){g(x,A,A)}};q=function(w){var x=d(w);f(w,x.start,x.end,true)};m=function(w){var x=d(w),y;if(x.start!=x.end){y=w.value;w.value=y.slice(0,x.start)+y.slice(x.end)}g(w,x.start,x.start);return x.text};var u=function(z,C,B,y){var A=C+B.length;y=(typeof y=="string")?y.toLowerCase():"";if((y=="collapsetoend"||y=="select")&&/[\r\n]/.test(B)){var x=B.replace(/\r\n/g,"\n").replace(/\r/g,"\n");A=C+x.length;var w=C+x.indexOf("\n");if(z.value.slice(w,w+2)=="\r\n"){A+=x.match(/\n/g).length}}switch(y){case"collapsetostart":g(z,C,C);break;case"collapsetoend":g(z,A,A);break;case"select":g(z,C,A);break}};b=function(y,A,x,w){var z=y.value;y.value=z.slice(0,x)+A+z.slice(x);if(typeof w=="boolean"){w=w?"collapseToEnd":""}u(y,x,A,w)};n=function(x,A,w){var y=d(x),z=x.value;x.value=z.slice(0,y.start)+A+z.slice(y.end);u(x,y.start,A,w||"collapseToEnd")};i=function(x,z,C,w){if(typeof C==l){C=z}var y=d(x),B=x.value;x.value=B.slice(0,y.start)+z+y.text+C+B.slice(y.end);var A=y.start+z.length;u(x,A,y.text,w||"select")};function s(w,x){return function(){var A=this.jquery?this[0]:this;var B=A.nodeName.toLowerCase();if(A.nodeType==1&&(B=="textarea"||(B=="input"&&A.type=="text"))){var z=[A].concat(Array.prototype.slice.call(arguments));var y=w.apply(this,z);if(!x){return y}}if(x){return this}}}c.fn.extend({getSelection:s(d,false),setSelection:s(g,true),collapseSelection:s(p,true),deleteSelectedText:s(q,true),deleteText:s(f,true),extractSelectedText:s(m,false),insertText:s(b,true),replaceSelectedText:s(n,true),surroundSelectedText:s(i,true)})})})(jQuery);